<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <title>Become a Seller - Monolith Realty</title>
</head>

<body class="bg-surface font-sans antialiased text-gray-200 selection:bg-primary/30">
    <div id="navbar"></div>

    <div class="min-h-screen py-20 px-4 flex items-center justify-center">
        <div class="w-full max-w-2xl">
            <div class="text-center mb-10">
                <h1 class="text-4xl font-extrabold text-white mb-4">Become a Verified Seller</h1>
                <p class="text-gray-400">Join our network of trusted sellers. Listings from verified accounts get 3x
                    more visibility.</p>
            </div>

            <div class="glass rounded-3xl p-8 md:p-12 border border-dark-border shadow-2xl">
                <form id="sellerApplyForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Full Name *</label>
                            <input type="text" id="fullName" required class="input-field" placeholder="Kusal Perera">
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Email Address *</label>
                            <input type="email" id="email" required class="input-field" placeholder="you@example.com">
                            <p class="text-xs text-gray-500 mt-1">This will be your username.</p>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Phone Number *</label>
                            <input type="tel" id="phone" required class="input-field" placeholder="077 123 4567">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">City / District *</label>
                            <input type="text" id="cityOrDistrict" required class="input-field" placeholder="Colombo">
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">Address *</label>
                            <textarea id="address" required rows="2" class="input-field resize-none"
                                placeholder="123, Main Street..."></textarea>
                        </div>

                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-300 mb-2">NIC / Company Reg No
                                (Optional)</label>
                            <input type="text" id="nicOrCompanyRegNo" class="input-field"
                                placeholder="NIC or BR Number">
                        </div>
                    </div>

                    <div class="pt-4">
                        <button type="submit" class="btn-primary w-full py-4 text-lg font-bold">
                            Submit Application
                        </button>
                    </div>
                </form>
            </div>

            <div class="text-center mt-6">
                <a href="/login.html" class="text-primary hover:underline">Already have an account? Login</a>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
    <script type="module">
        import { setupNavbar } from '/src/main.js';

        document.getElementById('sellerApplyForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerText;
            btn.innerText = 'Submitting...';
            btn.disabled = true;

            const data = {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                cityOrDistrict: document.getElementById('cityOrDistrict').value,
                nicOrCompanyRegNo: document.getElementById('nicOrCompanyRegNo').value
            };

            try {
                const response = await fetch('http://localhost:8080/api/seller/apply', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    document.body.innerHTML = `
                        <div class="min-h-screen bg-surface flex items-center justify-center p-4 text-center">
                            <div class="glass p-10 rounded-3xl max-w-lg border border-primary/30">
                                <div class="w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl">ðŸŽ‰</div>
                                <h2 class="text-3xl font-bold text-white mb-4">Application Submitted!</h2>
                                <p class="text-gray-400 mb-6">Your application is under review. You will receive an email with an activation link once approved.</p>
                                <a href="/" class="btn-primary inline-block">Back to Home</a>
                            </div>
                        </div>
                    `;
                } else {
                    const error = await response.text();
                    alert('Submission failed: ' + error);
                    btn.innerText = originalText;
                    btn.disabled = false;
                }
            } catch (err) {
                console.error(err);
                alert('Something went wrong. Please try again.');
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });
    </script>
</body>

</html>